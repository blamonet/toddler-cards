<html>
  <head>
    <title>
      Toddler Cards
    </title>
    <link rel="icon" type="image/jpg" href="/img/icons/icon-512.jpg">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/icons/icon-144.jpg">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/icons/icon-114.jpg">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/icons/icon-72.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/icons/icon-57.jpg">
    <link href="js/lib/twbs/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="js/lib/fortawesome/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <script src="js/lib/frameworks/jquery/jquery.min.js"></script>
    <script src="js/lib/twbs/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var dictionary = {};
      var currentWord = 0;
      function playSound() {
        var audio = $("#mysoundclip")[0];
        audio.play();
      }
      function nextWord() {
        var newWord = currentWord;
        while (newWord == currentWord) {
          newWord=Math.floor(Math.random()*dictionary.length);
        }
        currentWord = newWord;
        var entry = dictionary[currentWord];
        var sound = "";
        var sound_audio_tag = "";
        if (entry.sound && entry.sound.length > 0) {
        var sound_audio_tag = "<audio id=\"mysoundclip\" preload=\"auto\"><source src=\"sounds/" + entry.sound[0] + "\"></source></audio>"
        var sound = "<button class=\"btn btn-primary\" onclick=\"playSound()\"><i class=\"icon icon-bell\"></i>";
        }
        $(".word").html(entry.title + " " + sound + sound_audio_tag);
        var image = entry.img[Math.floor(Math.random()*entry.img.length)];
        $(".wordImage img").attr("src","img/" + image);
      }
      function addCategory(categoryName) {
        var option = "<option>" + categoryName + "</option>";
        $(".categorySelector").append(option);
      }
      $(document).ready(function() {
          $(".categorySelector").append('<option>all</option>');
          $.getJSON("items.json", function (data) {
            dictionary = data.dictionary;
            $.each(dictionary, function(i, item) {
              $.each(item.category, function(j, category) {
                  addCategory(category);
              });
            });
            currentWord=Math.floor(Math.random()*dictionary.length);
            var entry = dictionary[currentWord];
            var sound = "";
            var sound_audio_tag = "";
            if (entry.sound && entry.sound.length > 0) {
            var sound_audio_tag = "<audio id=\"mysoundclip\" preload=\"auto\"><source src=\"sounds/" + entry.sound[0] + "\"></source></audio>"
            var sound = "<button class=\"btn btn-primary\" onclick=\"playSound()\"><i class=\"icon icon-bell\"></i>";
            }
            $(".word").html(entry.title + " " + sound + sound_audio_tag);
            var image = entry.img[Math.floor(Math.random()*entry.img.length)];
            $(".wordImage img").attr("src","img/" + image);
          });  
        });  
        $(document).keypress(function(e) {
          var code = (e.keyCode ? e.keyCode : e.which);
          if(code == 13 || code == 32) { //Enter keycode or space
            nextWord();
          }
        });

      </script>
      <style type="text/css">
        .navbar-form {
          padding:0px;
          padding-right:20px;
          margin-bottom:0px;
        }
        .word {
          text-align:center;
          text-shadow: 2px 2px #eee;
          font-size: 5em;
        }
        .wordImage img {
          box-shadow: 5px 5px #dedede;
          border: 5px solid #000;
          margin: 0 auto;
        }
        .card {
          margin-top:30px;
        }
      </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
          <a class="navbar-brand" style="color:#F26B30" href="/">Toddler Cards</a>
          <div class="navbar-form navbar-right">
            <a class="btn btn-primary pull-right" href="javascript:nextWord()">Next <i class="icon icon-double-angle-right"></i></a>
          </div>
    </div>
<!-- not implemented yet    <div class="container categories">
      <select class="categorySelector">
      </select>
    </div>
-->
    <div class="container card col-md-12">
      <h1 class="word"></h1>
      <div class="wordImage"><img src="" class="img-responsive" /></div>
    </div>
  </body>
</html>
